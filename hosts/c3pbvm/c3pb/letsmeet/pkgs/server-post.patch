diff --git a/hosts/c3pbvm/c3pb/letsmeet/pkgs/node-packages-server.nix b/hosts/c3pbvm/c3pb/letsmeet/pkgs/node-packages-server.nix
index 21ecaaa..afd309e 100644
--- a/hosts/c3pbvm/c3pb/letsmeet/pkgs/node-packages-server.nix
+++ b/hosts/c3pbvm/c3pb/letsmeet/pkgs/node-packages-server.nix
@@ -1,6 +1,11 @@
 # This file has been generated by node2nix 1.11.1. Do not edit!
 
-{nodeEnv, fetchurl, fetchgit, nix-gitignore, stdenv, lib, globalBuildInputs ? []}:
+{nodeEnv, fetchurl, fetchgit, runCommand, edumeetSrc, nix-gitignore, stdenv, lib, globalBuildInputs ? []}:
 
 let
+  copyFileToStore = path: runCommand (builtins.baseNameOf path) {
+    inherit path;
+    preferLocalBuild = true;
+    allowSubstitutes = false;
+  } "cp $path $out";
   sources = {
@@ -1673,2 +1673,5 @@ let
       name = "mediasoup";
+      patches = [
+        (copyFileToStore ./mediasoup-avoid-long-path.patch)
+      ];
       packageName = "mediasoup";
@@ -2754,7 +2754,12 @@ let
     name = "edumeet-server";
     packageName = "edumeet-server";
     version = "3.3.4";
-    src = ./.;
+    src = "${edumeetSrc}/server";
+    postInstall= ''
+      echo postInstallHook
+      mv node_modules/mediasoup/worker/out/out/Release node_modules/mediasoup/worker/out/Release
+      find -name "*.o" -exec rm {} \+
+    '';
     dependencies = [
       sources."@mapbox/node-pre-gyp-1.0.11"
       sources."@opentelemetry/api-1.6.0"
@@ -2785,7 +2785,12 @@ let
       sources."base64-js-1.5.1"
       sources."base64id-2.0.0"
       sources."base64url-3.0.1"
-      sources."bcrypt-5.0.0"
+      (sources."bcrypt-5.0.0" // {
+        dependencies = [
+          sources."node-gyp-build-4.2.3"
+          sources."node-pre-gyp-0.15.0"
+        ];
+      })
       sources."bintrees-1.0.2"
       sources."blob-0.0.5"
       (sources."body-parser-1.20.2" // {
